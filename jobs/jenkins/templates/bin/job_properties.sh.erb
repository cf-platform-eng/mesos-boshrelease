#!/usr/bin/env bash

#
# Jenkins properties
#

# Directory to store the Jenkins configuration files
export JENKINS_CONF_DIR=${JOB_DIR}/config

# Directory to store the Jenkins log files
export JENKINS_LOG_DIR=${LOG_DIR}

# Directory to store the Jenkins process IDs
export JENKINS_PID_DIR=${RUN_DIR}

# Directory to store the Jenkins data files
export JENKINS_STORE_DIR=${STORE_DIR}

# Directory to store the Jenkins temp files
export JENKINS_TMP_DIR=${TMP_DIR}

# Jenkins home directory
export JENKINS_HOME=${JENKINS_STORE_DIR}

# Jenkins plugins directory
export JENKINS_PLUGINS_DIR=${JENKINS_STORE_DIR}/plugins

# User which will own the Jenkins services
export JENKINS_USER="<%= p('jenkins.user') %>"

# Group which will own the Jenkins services
export JENKINS_GROUP="<%= p('jenkins.group') %>"

# Java Heap Size for Jenkinss
export JENKINS_JAVA_HEAP_SIZE="<%= p('jenkins.java_heap_size') %>"

# Set the level of debug msgs (1-9)
export JENKINS_DEBUG_LEVEL="<%= p('jenkins.debug_level') %>"

# Port Jenkins will listen using standard http protocol
export JENKINS_PORT="<%= p('jenkins.port') %>"

# IP address where to bind Jenkins using standard http protocol
export JENKINS_LISTEN_ADDRESS="<%= p('jenkins.listen_address') %>"

# Enable/disable host name lookups on incoming http connections
export JENKINS_HTTP_DO_HOSTNAME_LOOKUPS="<%= p('jenkins.http_do_hostname_lookup') %>"

# How long idle HTTP keep-alive connections are kept around (in ms)
export JENKINS_HTTP_KEEPALIVE_TIMEOUT="<%= p('jenkins.http_keepalive_timeout') %>"

# Port Jenkins will listen using standard AJP13 protocol
export JENKINS_AJP_PORT="<%= p('jenkins.ajp_port') %>"

# IP address where to bind Jenkins using standard AJP13 protocol
export JENKINS_AJP_LISTEN_ADDRESS="<%= p('jenkins.ajp_listen_address') %>"

# Set the no of worker threads to spawn at startup
export JENKINS_HANDLER_COUNT_STARTUP="<%= p('jenkins.handler_count_startup') %>"

# Set the max no of worker threads to allow
export JENKINS_HANDLER_COUNT_MAX="<%= p('jenkins.handler_count_max') %>"

# Set the max no of idle worker threads to allow
export JENKINS_HANDLER_COUNT_MAX_IDLE="<%= p('jenkins.handler_count_max_idle') %>"

# Set the max number of parameters allowed in a form submission to protect against hash DoS attack
export JENKINS_MAX_PARM_COUNT="<%= p('jenkins.max_parm_count') %>"

# Prefix to append to Jenkins URL
export JENKINS_PREFIX="<%= p('jenkins.prefix') %>"

# Jenkins admin user
export JENKINS_ADMIN_USER="<%= p('jenkins.admin_user') %>"

# Jenkins admin password
export JENKINS_ADMIN_PASSWORD="<%= p('jenkins.admin_password') %>"

# Apache Mesos Native Library
export MESOS_NATIVE_JAVA_LIBRARY=/var/vcap/packages/mesos/lib/libmesos.so

# SASL plugins
export SASL_PATH=/var/vcap/packages/sasl/lib/sasl2/

#
# Nginx properties
#

# Directory to store the Nginx configuration files
export NGINX_CONF_DIR=${JOB_DIR}/config

# Directory to store the Nginx log files
export NGINX_LOG_DIR=${LOG_DIR}

# Directory to store the Nginx process IDs
export NGINX_PID_DIR=${RUN_DIR}

# Directory to store the Nginx data files
export NGINX_STORE_DIR=${STORE_DIR}

# Directory to store the Nginx temp files
export NGINX_TMP_DIR=${TMP_DIR}

# Directory to store the Nginx SSL certificates
export NGINX_CERTS_DIR=${NGINX_CONF_DIR}/ssl

# User which will own the Nginx services
export NGINX_USER="<%= p('jenkins.nginx.user') %>"

# Group which will own the Nginx services
export NGINX_GROUP="<%= p('jenkins.nginx.group') %>"
